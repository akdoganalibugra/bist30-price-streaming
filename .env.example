# =============================================================================
# BIST30 Price Streaming Platform - Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values
# DO NOT commit .env file to version control
#
# Reference: specs/001-bist30-streaming-platform/spec.md (Clarifications Section 8)

# -----------------------------------------------------------------------------
# RabbitMQ Configuration
# -----------------------------------------------------------------------------
RABBITMQ_URL=amqp://guest:guest@localhost:5672
RABBITMQ_EXCHANGE=prices
RABBITMQ_QUEUE=price_updates
RABBITMQ_ROUTING_KEY=price.update

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_HASH_KEY=prices:latest

# -----------------------------------------------------------------------------
# MySQL Configuration (Customer API only)
# -----------------------------------------------------------------------------
# Prisma connection string format: mysql://USER:PASSWORD@HOST:PORT/DATABASE
DATABASE_URL=mysql://bist30_user:bist30_pass@localhost:3306/bist30_customers

# -----------------------------------------------------------------------------
# Service Ports
# -----------------------------------------------------------------------------
DATA_SOURCE_PORT=3002
SOCKET_SERVER_PORT=3001
CUSTOMER_API_PORT=3000

# WebSocket URL for socket-client
SOCKET_CLIENT_WS_URL=ws://localhost:3001

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Options: debug, info, warn, error
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Price Generation Configuration
# -----------------------------------------------------------------------------
# WebSocket broadcast interval in milliseconds (fixed at 500ms)
BROADCAST_INTERVAL_MS=500

# Price generation interval range per symbol (random between min and max)
PRICE_GENERATION_MIN_INTERVAL_MS=50
PRICE_GENERATION_MAX_INTERVAL_MS=500

# Bounded random walk: maximum price change per tick (percentage)
# Example: 1.0 means Â±1.0% maximum change
PRICE_BOUNDED_DELTA_PERCENT=1.0

# Initial price range for first generation (in TRY)
PRICE_INITIAL_MIN=10
PRICE_INITIAL_MAX=100

# -----------------------------------------------------------------------------
# Connection Retry Configuration
# -----------------------------------------------------------------------------
# Maximum number of connection retry attempts
MAX_RETRY_ATTEMPTS=10

# Initial retry delay in milliseconds (exponential backoff applied)
RETRY_INITIAL_DELAY_MS=1000

# Maximum retry delay in milliseconds
RETRY_MAX_DELAY_MS=30000
